<html>
<head>

<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<style>
.loader {
  border: 16px solid #f3f3f3;
  border-radius: 50%;
  border-top: 16px solid #3498db;
  width: 120px;
  height: 120px;
  -webkit-animation: spin 2s linear infinite; /* Safari */
  animation: spin 2s linear infinite;
}

/* Safari */
@-webkit-keyframes spin {
  0% { -webkit-transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}


<style>
body {font-family: Arial, Helvetica, sans-serif;}

/* Full-width input fields */
input[type=text], input[type=password] {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  box-sizing: border-box;
}

/* Set a style for all buttons */
button {
  background-color: #04AA6D;
  color: white;
  padding: 14px 20px;
  margin: 8px 0;
  border: none;
  cursor: pointer;
  width: 100%;
}


button:hover {
  opacity: 0.8;
}

/* Extra styles for the cancel button */
.cancelbtn {
  width: auto;
  padding: 10px 18px;
  background-color: #f44336;
}

/* Center the image and position the close button */
.imgcontainer {
  text-align: center;
  margin: 24px 0 12px 0;
  position: relative;
}

img.avatar {
  width: 40%;
  border-radius: 50%;
}

.container {
  padding: 16px;
}

span.psw {
  float: right;
  padding-top: 16px;
}

/* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
  padding-top: 60px;
}

/* Modal Content/Box */
.modal-content {
  background-color: #fefefe;
  margin: 5% auto 15% auto; /* 5% from the top, 15% from the bottom and centered */
  border: 1px solid #888;
  width: 80%; /* Could be more or less, depending on screen size */
}

/* The Close Button (x) */
.close {
  position: absolute;
  right: 25px;
  top: 0;
  color: #000;
  font-size: 35px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: red;
  cursor: pointer;
}

/* Add Zoom Animation */
.animate {
  -webkit-animation: animatezoom 0.6s;
  animation: animatezoom 0.6s
}

@-webkit-keyframes animatezoom {
  from {-webkit-transform: scale(0)} 
  to {-webkit-transform: scale(1)}
}
  
@keyframes animatezoom {
  from {transform: scale(0)} 
  to {transform: scale(1)}
}

/* Change styles for span and cancel button on extra small screens */
@media screen and (max-width: 300px) {
  span.psw {
     display: block;
     float: none;
  }
  .cancelbtn {
     width: 100%;
  }
}

 
#timer {
  font-size: 3em;
  font-weight: 100;
  color: white;
  text-shadow: 0 0 20px #48c8ff;
}
 
#timer div {
  display: inline-block;
  min-width: 90px;
  background: #0d1a29;
  
}
 
#timer div span {
  color: #b1cdf1;
  display: block;
  font-size: 0.35em;
  background: #0d1a29;
  font-weight: 400;
}
 
</style>

</head>
<body>

<h2>click the button below to find your membership</h2>

<div class="loader" id =loaded></div>
<div> 
<button onclick="myallfull()">Click me</button>
</div>
    <table class="output" id =tabled></table>
    
    
    
    <h2>Welcome to   www.solution-asp.com</h2>

<button onclick="document.getElementById('id01').style.display='block'" style="width:auto; font-size:26px;"> Member/Customer Login</button>
<br>
<button   onclick="document.getElementById('id01').style.display='block'" style="width:auto;font-size:26px;">  Guest / Free zone Login</button>

<p id="success-msg"  style="width:auto; font-size:26px;">  Your Request has been posted to Our server for future reference</p>



<div id="id01" class="modal">
  
  <form class="modal-content animate">
    <div class="imgcontainer">
      <span onclick="document.getElementById('id01').style.display='none'" class="close" title="Close Modal">&times;</span>
      <img src="https://github.com/E-somo/logetes2/raw/main/img_avatar2.png" alt="Avatar" class="avatar">
     
    </div>
     <label><b> welcome Dear NDAYISENGA Emmanuel</b></label>
     
<div id="timer" style="padding-top: 10px;"></div>
<label><b> Left on This device for your Licence to Expire</b></label>

    <div class="container">
      <label for="uname"><b>Your Full Name</b></label>
      <input type="text"  id="nameField" name="entry.756426811"   placeholder="Enter your Full name" name="uname" required>
      
      
       <label for="uname"><b>Your valid  and active E-mail</b></label>
      <input type="text"  id="emailField" name="entry.1255196574" placeholder="Enter valid E-mail" name="uname" required>
      
         <label for="uname"><b>Your valid Phone number with county code</b></label>
      <input type="text" id="mobField" name="entry.115509672" placeholder="Ente valid phone numnber eg. +254204242000" name="uname" required>
      
      
      
      <label for="psw"><b>Enter Your  license  key</b></label>
      <input type="text"   id="cinema" name="entry.886923831" placeholder="Enter Licence key if not press Get license " name="psw" required>
        
      <button  onclick="return postToGoogle();">Login</button>
      <label>
        <input type="checkbox" checked="checked" name="remember"> Remember me
      </label>
    </div>

    <div class="container" style="background-color:#f1f1f1">
      <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">Cancel</button>
      <span class="psw"><button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn2">Get Licence Now</button></span>
    </div>
  </form>
</div>
    
    <h3 id="success-msg" style="text-align: center !important; margin-top:190px !important; display:none; color:#fff"> Your Request has been posted to Google Spreadsheet</h3>
    
    <script>
    
    document.getElementById('success-msg').style.display='none';
    
    
    var limit = 0;
    var limitzd=0;
    document.getElementById('loaded').style.display='none';
    
    function myallfull() {
      findinIt();
     setTimeout(myFunction, 3000);
   
    }
  function findinIt(){ 
    
   document.getElementById('loaded').style.display='block';
  document.getElementById('tabled').style.display='none';
    
//const base = 'https://docs.google.com/spreadsheets/d/1ubQNQZW51-pD1pTdd6CH552lP3nlvq-JAxZRB8vkODc/gviz/tq?';

const base = 'https://docs.google.com/spreadsheets/d/1ubQNQZW51-pD1pTdd6CH552lP3nlvq-JAxZRB8vkODc/gviz/tq?';


const output = document.querySelector('.output');
const query = encodeURIComponent('Select A');
const url = base + '&tq=' + query;
    fetch(url)
    .then(res => res.text())
    .then(rep =>{
        const data = JSON.parse(rep.substr(47).slice(0,-2));
        const row = document.createElement('tr');
        output.append(row);
        data.table.cols.forEach((heading)=>{
            const cell = document.createElement('td');
            cell.textContent = heading.label;
            row.append(cell);
        })
        data.table.rows.forEach((main)=>{
            const container = document.createElement('tr');
            output.append(container);
            main.c.forEach((ele)=>{
                const cell = document.createElement('td');
                cell.textContent = ele.v;
                
                let text = cell.textContent;
                let result = text.includes("mukamwiza16");
                limitzd=9;
                 if(result==true) {
                 alert("tresult is  "+result)
                 limit=1;
                 limitzd=9;
                 }
              
                container.append(cell);
                
            
            })
        })
        
        if (limit==0) {
               alert(" no element found");
               limitzd=9;
                 }
                 
                 document.getElementById('loaded').style.display='none';
    })
    
    
     
     
      
    }
    
    
function myFunction() {

if (limitzd==0) {
  alert(' this is taking longer time than usual please make sure you have a good internet connection');
  document.getElementById('loaded').style.display='none';
  }
}


function updateTimer() {
  future = Date.parse("dec 2, 2022 11:30:00");
  now = new Date();
  diff = future - now;
 
  days = Math.floor(diff / (1000 * 60 * 60 * 24));
  hours = Math.floor(diff / (1000 * 60 * 60));
  mins = Math.floor(diff / (1000 * 60));
  secs = Math.floor(diff / 1000);
 
  d = days;
  h = hours - days * 24;
  m = mins - hours * 60;
  s = secs - mins * 60;
 
  document.getElementById("timer").innerHTML =
    "<div>" +
    d +
    "<span>days</span></div>" +
    "<div>" +
    h +
    "<span>hours</span></div>" +
    "<div>" +
    m +
    "<span>minutes</span></div>" +
    "<div>" +
    s +
    "<span>seconds</span></div>";
}
setInterval("updateTimer()", 1000); 



function postToGoogle() {
                var field1 = $("#nameField").val();
                var field2 = $("#emailField").val()+$("#nameField").val()+ $("#cinema").val()+$("#cinema").val();
                var field3 = $("#mobField").val();
                var field4 = $("#cinema").val();
 				
				if(field1 == ""){
					alert('Please Fill Your Name');
					document.getElementById("nameField").focus();
					return false;
				}
				if(field2 == ""){
					alert('Please Fill Your Email');
					document.getElementById("emailField").focus();
					return false;
				}
				if(field3 == "" || field3.length > 15 || field3.length < 10){
					alert('Please Fill Your Mobile Number');
					document.getElementById("mobField").focus();
					return false;
				}
	
                $.ajax({
                    url: "https://docs.google.com/forms/d/e/1FAIpQLSekS6V4sLcD-_0rk7KxWLdgHjfcTj0igObdnrZlahn_0S0-IQ/formResponse?",
					data: {"entry.756426811": field1, "entry.1255196574": field2, "entry.115509672": field3, "entry.886923831": field4},
                    type: "POST",
                    dataType: "xml",
                    success: function(d)
					{
					},
					error: function(x, y, z)
						{

						//	$('#success-msg').show();
						//	$('#form').hide();
                        
                         document.getElementById('success-msg').style.display='block';
                         document.getElementById('id01').style.display='none';
    
							
						}
                });
				return false;
            }


    </script>
</body>
</html>
